%
% morelayout.sty -- Layout
%

% Indent one em
\setlength{\parindent}{1em}

% Remove space between paragraphs
\abnormalparskip{0em}

% Plain headers and footers
\makepagestyle{polytextum}
\makeevenfoot{polytextum}{\normalfont\thepage}{}{}
\makeoddfoot{polytextum}{}{}{\normalfont\thepage}

% Set header and footer heights
\setlength{\headheight}{\baselineskip}
\setlength{\footskip}{3\baselineskip}

% Empty part page style
\aliaspagestyle{part}{empty}
\aliaspagestyle{chapter}{polytextum}

% Do not number anything
\setsecnumdepth{none}

% Chapter style
\makechapterstyle{polytextum}{%
  \renewcommand{\chapterheadstart}{}
  \renewcommand{\printchaptername}{}
  \renewcommand{\chapternamenum}{}
  \renewcommand{\printchapternum}{}
  \renewcommand{\afterchapternum}{}
  \renewcommand{\printchaptertitle}[1]{%
    \raggedright\uppercaps{##1}}
  \renewcommand{\afterchaptertitle}{%
    \vspace{\baselineskip}\vskipnextgrid\vspace{0.2bp} \hrule\vspace{\baselineskip}\vskipnextgrid}
}

% (Sub)section styles
\setsecheadstyle{\raggedright\normalfont\bfseries\needspace{1em}}
\setbeforesecskip{-\baselineskip}
\setaftersecskip{\baselineskip}

\setsubsecheadstyle{\raggedright\normalfont\smidgesmaller\itshape\needspace{1em}}
\setbeforesubsecskip{-\baselineskip}
\setaftersubsecskip{\baselineskip}

% Allows customisation of lists
\RequirePackage{enumitem}

% Use smaller bullet for itemize regardless of indentation
\setlist[itemize]{label=\textbullet}

% Remove dot from enumerate lists
\setlist[enumerate]{label=\arabic*}

% Remove all vertical spacing in all lists
\setlist{nosep}

% Place list labels in margin and leave a (flexible) empty line above and below
% lists
\setlist[1]{leftmargin=0em,topsep=\baselineskip}
\setlist[2]{leftmargin=1em}
\setlist[3]{leftmargin=2em}
\setlist[4]{leftmargin=3em}
\setlist[5]{leftmargin=4em}

% Use italic labels in description lists while leaving a flexible line above and
% below the list
\setlist[description]{font=\normalfont\itshape,leftmargin=21bp}

% Add the \vskipnextgrid command along with some basic grid support
\RequirePackage{luatex85}
\let\savepos\relax
\RequirePackage{gridset}
